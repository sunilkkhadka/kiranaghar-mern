{"ast":null,"code":"import axios from \"axios\";\nimport { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\"; //Get user from local storage\n\nconst user = JSON.parse(localStorage.getItem(\"user\"));\nexport const userLogin = createAsyncThunk(\"user/userLogin\", async user => {\n  try {\n    // let response = await fetch(\"/api/users/login\", {\n    //   method: \"POST\",\n    //   headers: {\n    //     \"Content-Type\": \"application/json\",\n    //   },\n    //   body: {\n    //     user,\n    //   },\n    // });\n    let response = await axios.post(\"/api/users/login\", user);\n\n    if (response.data) {\n      localStorage.setItem(\"user\", JSON.stringify(response.data));\n    }\n\n    return response.data;\n  } catch (error) {\n    console.error(error.message);\n  }\n});\nexport const userRegistration = createAsyncThunk(\"user/userRegistration\", async (user, thunkAPI) => {\n  try {\n    let response = await axios.post(\"/api/users\", user);\n\n    if (response.data) {\n      localStorage.setItem(\"user\", JSON.stringify(response.data));\n    }\n\n    return response.data;\n  } catch (error) {\n    console.error(error.message);\n  }\n});\nexport const userLogout = createAsyncThunk(\"user/userLogout\", async () => {\n  await localStorage.removeItem(\"user\");\n});\nconst userSlice = createSlice({\n  name: \"user\",\n  initialState: {\n    userData: user ? user : null,\n    isError: false,\n    isSuccess: false,\n    isLoading: false,\n    message: \"\"\n  },\n  reducers: {\n    reset: state => {\n      state.isError = false;\n      state.isSuccess = false;\n      state.isLoading = false;\n      state.message = \"\";\n    }\n  },\n  extraReducers: {\n    [userLogin.pending]: state => {\n      state.isLoading = true;\n    },\n    [userLogin.fulfilled]: (state, action) => {\n      state.userData = action.payload;\n      state.isSuccess = true;\n      state.isLoading = false;\n    },\n    [userLogin.rejected]: state => {\n      state.isLoading = false;\n      state.isError = true;\n      state.userData = null;\n    },\n    [userRegistration.pending]: state => {\n      state.isLoading = true;\n    },\n    [userRegistration.fulfilled]: (state, action) => {\n      state.userData = action.payload;\n      state.isSuccess = true;\n      state.isLoading = false;\n    },\n    [userRegistration.rejected]: state => {\n      state.isLoading = false;\n      state.isError = true;\n      state.userData = null;\n    },\n    [userLogout.fulfilled]: state => {\n      state.userData = null;\n    }\n  }\n});\nexport const {\n  reset\n} = userSlice.actions;\nexport default userSlice.reducer;","map":{"version":3,"names":["axios","createSlice","createAsyncThunk","user","JSON","parse","localStorage","getItem","userLogin","response","post","data","setItem","stringify","error","console","message","userRegistration","thunkAPI","userLogout","removeItem","userSlice","name","initialState","userData","isError","isSuccess","isLoading","reducers","reset","state","extraReducers","pending","fulfilled","action","payload","rejected","actions","reducer"],"sources":["/media/sunil/Local Disk F/kirana/frontend/src/features/userSlice.jsx"],"sourcesContent":["import axios from \"axios\";\nimport { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\n\n//Get user from local storage\n\nconst user = JSON.parse(localStorage.getItem(\"user\"));\n\nexport const userLogin = createAsyncThunk(\"user/userLogin\", async (user) => {\n  try {\n    // let response = await fetch(\"/api/users/login\", {\n    //   method: \"POST\",\n    //   headers: {\n    //     \"Content-Type\": \"application/json\",\n    //   },\n    //   body: {\n    //     user,\n    //   },\n    // });\n\n    let response = await axios.post(\"/api/users/login\", user);\n\n    if (response.data) {\n      localStorage.setItem(\"user\", JSON.stringify(response.data));\n    }\n    return response.data;\n  } catch (error) {\n    console.error(error.message);\n  }\n});\n\nexport const userRegistration = createAsyncThunk(\n  \"user/userRegistration\",\n  async (user, thunkAPI) => {\n    try {\n      let response = await axios.post(\"/api/users\", user);\n      if (response.data) {\n        localStorage.setItem(\"user\", JSON.stringify(response.data));\n      }\n      return response.data;\n    } catch (error) {\n      console.error(error.message);\n    }\n  }\n);\n\nexport const userLogout = createAsyncThunk(\"user/userLogout\", async () => {\n  await localStorage.removeItem(\"user\");\n});\n\nconst userSlice = createSlice({\n  name: \"user\",\n  initialState: {\n    userData: user ? user : null,\n    isError: false,\n    isSuccess: false,\n    isLoading: false,\n    message: \"\",\n  },\n  reducers: {\n    reset: (state) => {\n      state.isError = false;\n      state.isSuccess = false;\n      state.isLoading = false;\n      state.message = \"\";\n    },\n  },\n  extraReducers: {\n    [userLogin.pending]: (state) => {\n      state.isLoading = true;\n    },\n    [userLogin.fulfilled]: (state, action) => {\n      state.userData = action.payload;\n      state.isSuccess = true;\n      state.isLoading = false;\n    },\n    [userLogin.rejected]: (state) => {\n      state.isLoading = false;\n      state.isError = true;\n      state.userData = null;\n    },\n    [userRegistration.pending]: (state) => {\n      state.isLoading = true;\n    },\n    [userRegistration.fulfilled]: (state, action) => {\n      state.userData = action.payload;\n      state.isSuccess = true;\n      state.isLoading = false;\n    },\n    [userRegistration.rejected]: (state) => {\n      state.isLoading = false;\n      state.isError = true;\n      state.userData = null;\n    },\n    [userLogout.fulfilled]: (state) => {\n      state.userData = null;\n    },\n  },\n});\n\nexport const { reset } = userSlice.actions;\nexport default userSlice.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}